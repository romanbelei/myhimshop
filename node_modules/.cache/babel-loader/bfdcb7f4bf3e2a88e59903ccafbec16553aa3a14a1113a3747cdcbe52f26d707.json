{"ast":null,"code":"import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import axios from\"axios\";import{BASE_URL}from\"../../utils/constants\";import{shuffle}from\"../../utils/common\";export const getProducts=createAsyncThunk(\"products/getProducts\",async(_,thunkAPI)=>{try{const res=await axios(\"\".concat(BASE_URL,\"/products\"));return res.data;}catch(err){console.log(err);return thunkAPI.rejectWithValue(err);}});const productsSlice=createSlice({name:\"products\",initialState:{list:[],filtered:[],related:[],isLoading:false},reducers:{filterByPrice:(state,_ref)=>{let{payload}=_ref;state.filtered=state.list.filter(_ref2=>{let{price}=_ref2;return price<payload;});},getRelatedProducts:(state,_ref3)=>{let{payload}=_ref3;const list=state.list.filter(_ref4=>{let{id_category}=_ref4;return id_category===payload;});state.related=shuffle(list);}},extraReducers:builder=>{builder.addCase(getProducts.pending,state=>{state.isLoading=true;});builder.addCase(getProducts.fulfilled,(state,_ref5)=>{let{payload}=_ref5;state.list=payload;//state.list=stast.forEach((product)=>product.images.include(`\"[`)?product.images.slice(2, -2):product.images)\nstate.isLoading=false;});builder.addCase(getProducts.rejected,state=>{state.isLoading=false;});}});export const{filterByPrice,getRelatedProducts}=productsSlice.actions;export default productsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","BASE_URL","shuffle","getProducts","_","thunkAPI","res","concat","data","err","console","log","rejectWithValue","productsSlice","name","initialState","list","filtered","related","isLoading","reducers","filterByPrice","state","_ref","payload","filter","_ref2","price","getRelatedProducts","_ref3","_ref4","id_category","extraReducers","builder","addCase","pending","fulfilled","_ref5","rejected","actions","reducer"],"sources":["D:/React/myhimshop/src/features/products/productsSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nimport { BASE_URL } from \"../../utils/constants\";\nimport { shuffle } from \"../../utils/common\";\n\nexport const getProducts = createAsyncThunk(\n  \"products/getProducts\",\n  async (_, thunkAPI) => {\n    try {\n      const res = await axios(`${BASE_URL}/products`);\n      return res.data;\n    } catch (err) {\n      console.log(err);\n      return thunkAPI.rejectWithValue(err);\n    }\n  }\n);\n\nconst productsSlice = createSlice({\n  name: \"products\",\n  initialState: {\n    list: [],\n    filtered: [],\n    related: [],\n    isLoading: false,\n  },\n  reducers: {\n    filterByPrice: (state, { payload }) => {\n      state.filtered = state.list.filter(({ price }) => price < payload);\n    },\n    getRelatedProducts: (state, { payload }) => {\n      const list = state.list.filter(({ id_category }) => id_category === payload);\n      state.related = shuffle(list);\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(getProducts.pending, (state) => {\n      state.isLoading = true;\n    });\n    builder.addCase(getProducts.fulfilled, (state, { payload }) => {\n      state.list = payload;\n      //state.list=stast.forEach((product)=>product.images.include(`\"[`)?product.images.slice(2, -2):product.images)\n      state.isLoading = false;\n    });\n    builder.addCase(getProducts.rejected, (state) => {\n      state.isLoading = false;\n    });\n  },\n});\n\nexport const { filterByPrice, getRelatedProducts } = productsSlice.actions;\n\nexport default productsSlice.reducer;\n"],"mappings":"AAAA,OAASA,gBAAgB,CAAEC,WAAW,KAAQ,kBAAkB,CAChE,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,OAASC,QAAQ,KAAQ,uBAAuB,CAChD,OAASC,OAAO,KAAQ,oBAAoB,CAE5C,MAAO,MAAM,CAAAC,WAAW,CAAGL,gBAAgB,CACzC,sBAAsB,CACtB,MAAOM,CAAC,CAAEC,QAAQ,GAAK,CACrB,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAN,KAAK,IAAAO,MAAA,CAAIN,QAAQ,aAAW,CAAC,CAC/C,MAAO,CAAAK,GAAG,CAACE,IAAI,CACjB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChB,MAAO,CAAAJ,QAAQ,CAACO,eAAe,CAACH,GAAG,CAAC,CACtC,CACF,CACF,CAAC,CAED,KAAM,CAAAI,aAAa,CAAGd,WAAW,CAAC,CAChCe,IAAI,CAAE,UAAU,CAChBC,YAAY,CAAE,CACZC,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,EAAE,CACZC,OAAO,CAAE,EAAE,CACXC,SAAS,CAAE,KACb,CAAC,CACDC,QAAQ,CAAE,CACRC,aAAa,CAAEA,CAACC,KAAK,CAAAC,IAAA,GAAkB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CAChCD,KAAK,CAACL,QAAQ,CAAGK,KAAK,CAACN,IAAI,CAACS,MAAM,CAACC,KAAA,MAAC,CAAEC,KAAM,CAAC,CAAAD,KAAA,OAAK,CAAAC,KAAK,CAAGH,OAAO,GAAC,CACpE,CAAC,CACDI,kBAAkB,CAAEA,CAACN,KAAK,CAAAO,KAAA,GAAkB,IAAhB,CAAEL,OAAQ,CAAC,CAAAK,KAAA,CACrC,KAAM,CAAAb,IAAI,CAAGM,KAAK,CAACN,IAAI,CAACS,MAAM,CAACK,KAAA,MAAC,CAAEC,WAAY,CAAC,CAAAD,KAAA,OAAK,CAAAC,WAAW,GAAKP,OAAO,GAAC,CAC5EF,KAAK,CAACJ,OAAO,CAAGhB,OAAO,CAACc,IAAI,CAAC,CAC/B,CACF,CAAC,CACDgB,aAAa,CAAGC,OAAO,EAAK,CAC1BA,OAAO,CAACC,OAAO,CAAC/B,WAAW,CAACgC,OAAO,CAAGb,KAAK,EAAK,CAC9CA,KAAK,CAACH,SAAS,CAAG,IAAI,CACxB,CAAC,CAAC,CACFc,OAAO,CAACC,OAAO,CAAC/B,WAAW,CAACiC,SAAS,CAAE,CAACd,KAAK,CAAAe,KAAA,GAAkB,IAAhB,CAAEb,OAAQ,CAAC,CAAAa,KAAA,CACxDf,KAAK,CAACN,IAAI,CAAGQ,OAAO,CACpB;AACAF,KAAK,CAACH,SAAS,CAAG,KAAK,CACzB,CAAC,CAAC,CACFc,OAAO,CAACC,OAAO,CAAC/B,WAAW,CAACmC,QAAQ,CAAGhB,KAAK,EAAK,CAC/CA,KAAK,CAACH,SAAS,CAAG,KAAK,CACzB,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CAAEE,aAAa,CAAEO,kBAAmB,CAAC,CAAGf,aAAa,CAAC0B,OAAO,CAE1E,cAAe,CAAA1B,aAAa,CAAC2B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}