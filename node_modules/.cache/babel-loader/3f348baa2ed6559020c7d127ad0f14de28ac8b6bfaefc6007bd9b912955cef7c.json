{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import styles from\"../../styles/Header.module.css\";import{ROUTES}from\"../../utils/routes\";import LOGO from\"../../images/logo.svg\";import AVATAR from\"../../images/avatar.jpg\";import{toggleForm}from\"../../features/user/userSlice\";import{useGetProductsQuery}from\"../../features/api/apiSlice\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const dispatch=useDispatch();const navigate=useNavigate();const[searchValue,setSearchValue]=useState(\"\");const{currentUser,cart}=useSelector(_ref=>{let{user}=_ref;return user;});const[values,setValues]=useState({name:\"Guest\",avatar:AVATAR});const{data,isLoading}=useGetProductsQuery({title:searchValue});const handleClick=()=>{if(!currentUser)dispatch(toggleForm(true));else navigate(ROUTES.PROFILE);};useEffect(()=>{if(!currentUser)return;setValues(currentUser);},[currentUser]);const handleSearch=_ref2=>{let{target:{value}}=_ref2;setSearchValue(value);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.logo,children:/*#__PURE__*/_jsx(Link,{to:ROUTES.HOME,children:/*#__PURE__*/_jsx(\"img\",{src:LOGO,alt:\"Stuff\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.info,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.user,onClick:handleClick,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.avatar,style:{backgroundImage:\"url(\".concat(values.avatar,\")\")}}),/*#__PURE__*/_jsx(\"div\",{className:styles.username,children:values.name})]}),/*#__PURE__*/_jsxs(\"form\",{className:styles.form,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.icon,children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#search\")})})}),/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",name:\"search\",placeholder:\"\\u043F\\u043E\\u0448\\u0443\\u043A\",autoComplete:\"off\",onChange:handleSearch,value:searchValue})}),searchValue&&/*#__PURE__*/_jsx(\"div\",{className:styles.box,children:isLoading?\"Loading\":!data.length?\"No results\":data.map(_ref3=>{let{title,images,id}=_ref3;return/*#__PURE__*/_jsxs(Link,{onClick:()=>setSearchValue(\"\"),className:styles.item,to:\"/products/\".concat(id),children:[/*#__PURE__*/_jsx(\"div\",{className:styles.image,style:{backgroundImage:\"url(\".concat(images[0],\")\")}}),/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:title})]},id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.account,children:[/*#__PURE__*/_jsx(Link,{to:ROUTES.HOME,className:styles.favorites,children:/*#__PURE__*/_jsx(\"svg\",{className:styles[\"icon-fav\"],children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#heart\")})})}),/*#__PURE__*/_jsxs(Link,{to:ROUTES.CART,className:styles.cart,children:[/*#__PURE__*/_jsx(\"svg\",{className:styles[\"icon-cart\"],children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#bag\")})}),!!cart.length&&/*#__PURE__*/_jsx(\"span\",{className:styles.count,children:cart.length})]})]})]})]});};export default Header;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useDispatch","useSelector","styles","ROUTES","LOGO","AVATAR","toggleForm","useGetProductsQuery","jsx","_jsx","jsxs","_jsxs","Header","dispatch","navigate","searchValue","setSearchValue","currentUser","cart","_ref","user","values","setValues","name","avatar","data","isLoading","title","handleClick","PROFILE","handleSearch","_ref2","target","value","className","header","children","logo","to","HOME","src","alt","info","onClick","style","backgroundImage","concat","username","form","icon","xlinkHref","process","env","PUBLIC_URL","input","type","placeholder","autoComplete","onChange","box","length","map","_ref3","images","id","item","image","account","favorites","CART","count"],"sources":["D:/React/myhimshop/src/components/Header/Header.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport styles from \"../../styles/Header.module.css\";\n\nimport { ROUTES } from \"../../utils/routes\";\n\nimport LOGO from \"../../images/logo.svg\";\nimport AVATAR from \"../../images/avatar.jpg\";\n\nimport { toggleForm } from \"../../features/user/userSlice\";\nimport { useGetProductsQuery } from \"../../features/api/apiSlice\";\n\n\nconst Header = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const [searchValue, setSearchValue] = useState(\"\");\n\n  const { currentUser, cart } = useSelector(({ user }) => user);\n\n  const [values, setValues] = useState({ name: \"Guest\", avatar: AVATAR });\n\n  const { data, isLoading } = useGetProductsQuery({ title: searchValue });\n\n  const handleClick = () => {\n    if (!currentUser) dispatch(toggleForm(true));\n    else navigate(ROUTES.PROFILE);\n  };\n  \n  useEffect(() => {\n    if (!currentUser) return;\n\n    setValues(currentUser);\n  }, [currentUser]);\n  \n  const handleSearch = ({ target: { value } }) => {\n    setSearchValue(value);\n  };\n\n  \n    return (\n        <div className={styles.header}>\n           <div className={styles.logo}>\n              \n              <Link to={ROUTES.HOME}>\n                <img src={LOGO} alt=\"Stuff\" />\n              </Link>\n            </div>\n\n            <div className={styles.info}>\n              <div className={styles.user} onClick={handleClick}>\n                <div className={styles.avatar}\n                style={{backgroundImage: `url(${values.avatar})`}}\n                />\n                <div className={styles.username}>{values.name}</div>\n              </div>\n\n              <form className={styles.form}>\n                <div className={styles.icon}>\n                  <svg className=\"icon\">\n                    <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#search`} />\n                  </svg>\n                </div>\n                <div className={styles.input}>\n                  <input\n                    type=\"search\"\n                    name=\"search\"\n                    placeholder=\"пошук\"\n                    autoComplete=\"off\"\n                    onChange={handleSearch}\n                    value={searchValue}\n                  />\n                </div>\n                \n                {searchValue && (\n                    <div className={styles.box}>\n                      {isLoading\n                        ? \"Loading\"\n                        : !data.length\n                        ? \"No results\"\n                        : data.map(({ title, images, id }) => {\n                            return (\n                              <Link\n                                key={id}\n                                onClick={() => setSearchValue(\"\")}\n                                className={styles.item}\n                                to={`/products/${id}`}\n                              >\n                                <div\n                                  className={styles.image}\n                                  style={{ backgroundImage: `url(${images[0]})` }}\n                                />\n                                <div className={styles.title}>{title}</div>\n                              </Link>\n                            );\n                          })}\n                    </div>\n                )}\n              </form>\n\n              <div className={styles.account}>\n                <Link to={ROUTES.HOME} className={styles.favorites}>\n                  <svg className={styles[\"icon-fav\"]}>\n                    <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#heart`} />\n                  </svg>\n                </Link>\n\n                <Link to={ROUTES.CART} className={styles.cart}>\n                  <svg className={styles[\"icon-cart\"]}>\n                    <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#bag`} />\n                  </svg>\n                  {!!cart.length && (\n                    <span className={styles.count}>{cart.length}</span>\n                  )}\n                \n                </Link>\n              </div>\n\n            </div>\n        </div>\n    )\n};\n\nexport default Header;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}